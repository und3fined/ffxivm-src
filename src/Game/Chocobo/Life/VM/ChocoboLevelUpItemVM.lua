---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2024/1/23 10:08
---

local LuaClass = require("Core/LuaClass")
local UIViewModel = require("UI/UIViewModel")
local ChocoboDefine = require("Game/Chocobo/ChocoboDefine")
local ChocoboUiIconCfg = require("TableCfg/ChocoboUiIconCfg")
local ProtoRes = require("Protocol/ProtoRes")

---@class ChocoboLevelUpItemVM : UIViewModel
local ChocoboLevelUpItemVM = LuaClass(UIViewModel)

---Ctor
function ChocoboLevelUpItemVM:Ctor()
    self.AttrID = 0
    self.CurValue = 0
    self.MaxValue = 0
    self.OldProgress = 0
    self.NewProgress = 0
    self.AttrName = ""
    self.AttrIconPath = ""

    self.FilterAttrIconPathCfg = {
        [ChocoboDefine.OVERVIEW_FILTER_TYPE.MAX_SPEED] = ChocoboUiIconCfg:FindPathByKey(ProtoRes.CHOCOBO_UI_ICON_TYPE.ATTR_MAX_SPEED),
        [ChocoboDefine.OVERVIEW_FILTER_TYPE.SPRINT_SPEED] = ChocoboUiIconCfg:FindPathByKey(ProtoRes.CHOCOBO_UI_ICON_TYPE.ATTR_SPRINT_SPEED),
        [ChocoboDefine.OVERVIEW_FILTER_TYPE.ACCELERATION] = ChocoboUiIconCfg:FindPathByKey(ProtoRes.CHOCOBO_UI_ICON_TYPE.ATTR_ACCELERATION),
        [ChocoboDefine.OVERVIEW_FILTER_TYPE.STAMINA] = ChocoboUiIconCfg:FindPathByKey(ProtoRes.CHOCOBO_UI_ICON_TYPE.ATTR_STAMINA),
        [ChocoboDefine.OVERVIEW_FILTER_TYPE.SKILL_STRENGTH] = ChocoboUiIconCfg:FindPathByKey(ProtoRes.CHOCOBO_UI_ICON_TYPE.ATTR_SKILL_STRENGTH),
    }
end

function ChocoboLevelUpItemVM:UpdateVM(Data)
    self.AttrID = Data.AttrID
    self.MaxValue = Data.MaxValue
    self.CurValue = Data.OldValue .. "/" .. Data.NewValue
    self.OldProgress = Data.OldValue / Data.MaxValue
    self.NewProgress = Data.NewValue / Data.MaxValue
    
    self.AttrName = ChocoboDefine.CHOCOBO_ATTR_TYPE_NAME[self.AttrID]
    self.AttrIconPath = self.FilterAttrIconPathCfg[self.AttrID] or ""
end

return ChocoboLevelUpItemVM